Change Log

Patches from the following Apache Jira issues have been applied
to this release in the order indicated. This is in addition to
the patches applied from issues referenced in CHANGES.txt.


Release 0.20-append - unreleased

  NEW FEATURES

    HDFS-200. Support append and sync for hadoop 0.20 branch.

    HDFS-101. DFSClient correctly detects second datanode failure in write
    pipeline. (Nicolas Spiegelberg via dhruba)
  
    HDFS-988. Fix bug where savenameSpace can corrupt edits log.
    (Nicolas Spiegelberg via dhruba)

    HDFS-826. Allow a mechanism for an application to detect that 
    datanode(s) have died in the write pipeline. (dhruba)

    HDFS-142. Blocks that are being written by a client are stored in the
    blocksBeingWritten directory. 
    (Dhruba Borthakur, Nicolas Spiegelberg, Todd Lipcon via dhruba)

    HDFS-630. Client can exclude specific nodes in the write pipeline.
    (Nicolas Spiegelberg via dhruba)

    HDFS-457. Better handling of volume failure in DataNode Storage.
    (Nicolas Spiegelberg via dhruba)

    HDFS-445. pread should refetch block locations when necessary.
    (Todd Lipcon via dhruba)

    HDFS-1057.  Concurrent readers hit ChecksumExceptions if following 
    a writer to very end of file (Sam Rash via dhruba)

    HDFS-1202.  DataBlockScanner throws NPE when updated before 
    initialized. (Todd Lipcon via dhruba)

  IMPROVEMENTS

  BUG FIXES

    HDFS-1054. remove sleep before retry for allocating a block.
    (Todd Lipcon via dhruba)

    HDFS-561. Fix write pipeline READ_TIMEOUT.
    (Todd Lipcon via dhruba)

    HDFS-927. DFSInputStream retries too many times for new block locations.
    (Todd Lipcon via dhruba)

    HDFS-1215. Fix unit test TestNodeCount.
    (Todd Lipcon via dhruba)

    HDFS-606. Fix ConcurrentModificationException in invalidateCorruptReplicas.
    (Todd Lipcon via dhruba)

    HDFS-1210. DFSClient should log exception when block recovery fails.
    (Todd Lipcon via dhruba)

    HDFS-1211. Block receiver should not log "rewind" packets at INFO level.
    (Todd Lipcon via dhruba)

    HDFS-1118. Fix socketleak on DFSClient. 
    (Zheng Shao via dhruba)

    HDFS-1254. Support append/sync via the default configuration.
    (dhruba)
